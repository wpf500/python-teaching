<!DOCTYPE html>
<html>
<head>
    <title>Learning Python</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/codemirror.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/theme/neat.min.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reqwest/2.0.5/reqwest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/mode/python/python.min.js"></script>

    <style>
        html {
            overflow-x: hidden;
        }
        body {
            color: #333;
            font-family: helvetica, sans-serif;
            line-height: 1.3;
            margin: 0;
            padding: 0;
        }
        header {
            position: relative;
            height: 100vh;
            color: white;
            background-image: url(header.png);
            background-size: cover;
            background-position: center;
            margin-bottom: 20px;
        }
        h1 {
            position: absolute;
            left: 5%;
            bottom: 10%;
            font-size: 120px;
            line-height: 1;
            margin: 0;
        }
        textarea {
            width: 100%;
        }

        code {
            font-weight: bold;
            font-size: 14px;
        }
        em {
            color: red;
            font-style: normal;
            font-weight: bold;
        }
        section {
            margin: 80px 0;
            display: none;
        }

        .wrapper {
            position: relative;
            max-width: 700px;
            margin: 0 auto;
        }

        .container {
            margin: 0 auto;
            max-width: 700px;
        }

        .editor {
            background-color: #eee;
            padding: 20px;
        }
        .hint {
            position: absolute;
            left: 100%;
            margin: 0 0 0 20px;
            width: 200px;
            background-color: #FFFAE9;
            padding: 5px;
        }
        .hint::before {
            content: "Hint:";
            display: block;
            font-style: italic;
        }
        .CodeMirror {
            border: 1px solid #767676;
            height: auto;
        }
        .run {
            display: block;
            cursor: pointer;
            margin: 10px 0 0 auto;
            padding: 8px 20px;
            border: 0;
            outline: 0;
            background: red;
            font-weight: bold;
            font-size: 16px;
            color: white;
        }
        .run:hover {
            background: #c10000;
        }
        .output {
            display: none;
            margin: 10px 0 0;
            white-space: pre-wrap;
            background-color: #333;
            color: #67f967;
            padding: 5px;
        }
        .next {
            display: none;
            border: 0;
            width: 200px;
            height: 75px;
            font-size: 50px;
            margin: -40px 0 80px;
            background: blue;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <h1>Learning Python</h1>
    </header>
    <section>
        <div class="wrapper">
            <p>
                You've been tasked with making a program which explains what
                happens at the CIJ Summer Conference. Your program needs to
                tell people the following:
            </p>
            <ul>
                <li>The conference name</li>
                <li>That it lasts 3 days</li>
                <li>That there are 5 rooms in use</li>
                <li>That each room is used 10 times per day</li>
                <li>The total number of sessions (3 &times; 5 &times; 10 = 150)</li>
            </ul>
            <p>
                <em>We've made a start for you, finish off the rest.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <code>print</code> tells Python to display something on the screen
                </p>
                <textarea>
print "Welcome to CIJ Summer"
print "CIJ Summer lasts for 3 days"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Nice one, everyone's raving about your CIJ Summer explainer. So
                much so that PyCon wants the same thing. The format of the
                conference is different, you now need to tell people the
                following:
            </p>
            <ul>
                <li>The conference name</li>
                <li>That it lasts 4 days</li>
                <li>That there are 9 rooms in use</li>
                <li>That each room is used 10 times per day</li>
                <li>The total number of sessions</li>
            </ul>
            <p>
                <em>Update the program in the box above to reflect PyCon.</em>
            </p>
            <p>
                Hopefully you found that really tedious. In the next section
                we'll learn how to use variables to improve your program.
            </p>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>Using variables</h2>
            <p>
                In the last exercise you had to change "CIJ Summer" to "PyCon"
                in at least two places. If only there was a way of only having
                to update the conference name once.
            </p>
            <p>
                THERE IS!!!! You can store the name of a conference in a
                variable.  Below, on line 1, we are declaring a variable where
                the name is <code>conference</code> and the value is "CIJ Summer".
            </p>
            <p>
                <em>Run this example.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <b>Variables</b> are used to store information which can then
                    later be used in your program
                </p>
                <textarea>
conference = "CIJ Summer"

print "Welcome to " + conference
print conference + " lasts for 3 days"
print "There are 5 rooms in use"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Now go ahead and change the value of <code>conference</code>
                from "CIJ Summer" to "PyCon", <em>what happens?</em>
            </p>
        </div>
        <div class="wrapper">
            <p>
                In the first exercise, you probably also had to work out the
                total number of sessions at PyCon in your head and no one wants
                to do that. You might also have heard that computers can do
                maths.
            </p>
            <p>
                You should store the number of days, rooms and sessions per
                rooms in variables and get Python to calculate the total number
                of sessions.  <em>Replace the ??? with the information for CIJ
                Summer and run the program</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    In Python, the asterisk (<code>*</code>) means multiply
                </p>
                <textarea>
conference = "CIJ Summer"
number_of_days = "3"
number_of_rooms = ???
room_sessions_per_day = ???

print "Welcome to " + conference
print conference + " lasts for " + number_of_days + " days"
print "There are " + number_of_rooms + " rooms in use"

total_sessions = number_of_days * number_of_rooms * room_sessions_per_day
print "There are " + total_sessions + " sessions in total"
</textarea>
            </div>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>Variable types</h2>
            <p>
                <em>Fill in the ???, this time using integers instead of
                strings.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <textarea>
number_of_days = 3
number_of_rooms = ???
room_sessions_per_day = ???

total_sessions = number_of_days * number_of_rooms * room_sessions_per_day
print total_sessions
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Congratulations, you've made a calculator. If you haven't used
                a calculator before, think of this as the last day you'll ever
                have to do basic arithmetic manually.
            </p>
            <p>
                Bringing everything back together for your conference explainer,
                <em>complete the code below.</em> The hint will hopefully help
                you figure out how to make this program work.
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <code>str(x)</code> converts the variable <code>x</code>
                    from an integer to a string
                </p>
                <textarea>
conference = "CIJ Summer"

number_of_days = 3
number_of_rooms = 5
room_sessions_per_day = 10

print "Welcome to " + conference
print conference + " lasts for " + str(number_of_days) + " days"
print "There are " + number_of_rooms + " rooms in use"

total_sessions = number_of_days * number_of_rooms * room_sessions_per_day
print "There are " + total_sessions + " sessions in total"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Now you can change the variables to reflect PyCon, or any other
                event you can think of, and sell it to everyone for ludicrous
                sums of money. They don't need to know that you just altered a
                few variables.
            </p>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>If statements</h2>
            <p>
                There's a new requirement for your conference explainer. Boris
                Johnson, inexplicably the Foreign Secretary, has announced that
                <i>"event explainer programs can only be sold abroad if they
                display a warning for events with more than 300 sessions"</i>.
            </p>
            <p>
                You probably do want access to the foreign event market, so
                you'll have to add the warning. <em>Run the code below.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <code>if</code> statements allow you to only run a piece
                    of code if certain conditions are met
                </p>
                <textarea>
conference = "CIJ Summer"
total_sessions = 150

print "Welcome to " + name
if total_sessions > 300:
    print "This conference is really big, be careful"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Now change the value of <code>total_sessions</code> from 150 to
                360, <em>what happens?</em>
            </p>
            <p>
                Argh another requirement, welcome to the life of a software
                developer.  PyCon wants to add an extra message to their
                explainer.  They've run out of organic wild Kopi Luwak coffee
                beans and are going to have to serve instant coffee, the
                hipsters won't be happy.
            </p>
            <p>
                <em>Complete the code below.</em> Check that the message only
                appears if the value of <code>conference</code> is "PyCon".
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    You can use the equality operator, <code>==</code> (double equals),
                    to compare two values
                </p>
                <textarea>
conference = "PyCon"

if ???:
    print "Unfortunately, we've run out of organic coffee beans"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                A rival conference, PiKon, hears about PyCon's predicament and
                decides to use it to attract budding Python developers.  If the
                conference name is "PiKon", <em>add a message</em> which
                announces their plentiful supply of coffee (these requirements
                are getting quite contrived aren't they?!).
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <textarea>
conference = "PiKon"

if conference == "PyCon":
    print "Unfortunately, we've run out of coffee beans"
if ???:
    print "We have plenty of coffee"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Food for thought: how would you add a message for all
                conferences <u>except</u> PyCon?
            </p>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>Else clauses</h2>
            <p>
                Lets finish off these increasingly tedious requirements. The
                code below will display a different message depending on whether
                <code>conference</code> has a value of "PyCon" or not. <em>Run
                the code, then modify it to make sure you see both messages
                appearing.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <code>else</code> clauses are executed if the condition
                    in the <code>if</code> statement is <u>not</u> true
                </p>
                <textarea>
conference = "CIJ Summer"
total_sessions = 150

if conference = "PyCon":
    print "Unfortunately, we've run out of coffee beans"
else:
    print conference + " has plenty of coffee"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Now add back the warning about conferences with over 300
                sessions, but also <em>show a different message if the
                conference has 300 sessions or fewer.</em>
            </p>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>Functions</h2>
            <p>
                An hour ago, you thought Python was a snake. Now, you've built
                a beautiful event explainer program. You deserve some credit,
                you should tell people about your achievements.  To be doubly
                sure that people are aware of the gravity of what you've done,
                you should probably tell them twice.
            </p>
            <p>
                <em>Change the name/organisation below and run the code.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <textarea>
print "Welcome to CIJ Summer"

print "This program was built by:"
print "Will Franklin"
print "The Guardian"

print "The rest of your explainer here..."

print "This program was built by:"
print "Will Franklin"
print "The Guardian"
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Even if you moved your name and organisation into variables, that's
                still a lot of typing. If only there was a way of only having to type
                out your credit once, then displaying it repeatedly.
            </p>
            <p>
                THERE IS!!! The function <code>credit()</code> below runs both
                <code>print</code> statements when you run it. <em>Run the code
                below, do you understand why the output appears in that
                order?</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <b>Functions</b> allow you to group together code and reduce
                    repetition in your program
                </p>
                <textarea>
def credit():
    print "This program was built by:"
    print "Will Franklin"
    print "The Guardian"

print "Welcome to CIJ Summer"

credit()

print "The rest of your explainer here..."

credit()
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                We should probably give Boris Johnson credit for that
                ridiculous requirement he introduced earlier because, although
                stupid, it did give us something to do. Also I doubt he's going
                to do anything worthy of credit now he's (still inexplicably)
                Foreign Secretary.
            </p>
            <p>
                Add another function with the name <code>credit_boris()</code>
                that credits Boris, <em>then run the program.</em>
            </p>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>Functions with inputs</h2>
            <p>
                Hopefully you're beginning to sense that if you are doing
                something repetitive on a computer, there is probably a better
                way.
            </p>
            <p>
                Here we have a function which takes two inputs, a
                <code>name</code> and <code>organisation</code>, and displays
                them on the screen. <em>Run this example.</em>
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    Functions can take <b>input parameters</b>, which you give
                    a value to when you use the function
                </p>
                <textarea>
def credit(name, organisation):
    print "This program was built by:"
    print name
    print organisation

print "Welcome to CIJ Summer"

credit("Will Franklin", "The Guardian")
credit("Boris Johnson", "Foreign Secretary")

print "The rest of your explainer here..."

credit("Boris Johnson", "Foreign Secretary")
credit("Will Franklin", "The Guardian")
</textarea>
            </div>
        </div>
        <div class="wrapper">
            <p>
                Sorry I made you credit Boris, he definitely doesn't deserve it.
                Using the <code>credit()</code> function, <em>Add a credit for
                someone else who you think actually deserves it.</em>
            </p>
        </div>
    </section>

    <div class="wrapper">
        <button class="next">Next</button>
    </div>

    <section>
        <div class="wrapper">
            <h2>Functions with outputs</h2>
            <p>
                
            </p>
        </div>
        <div class="editor">
            <div class="wrapper">
                <p class="hint">
                    <code>return</code> tells Python to output
                    a value from the function
                </p>
                <textarea>
def get_conference_message(sessions):
    if sessions > 300:
        return "This conference is large"
    else:
        return "This conference is small"

conference = "CIJ Summer"
total_sessions = 150

print "Welcome to " + conference

message = get_conference_message(total_sessions)
print message
</textarea>
            </div>
        </div>
    </section>
    <script>
        function $$(s) {
            return [].slice.apply(document.querySelectorAll(s));
        }

        function run(code) {
            return reqwest({
                'method': 'POST',
                'url': '/run',
                'contentType': 'text/plain',
                'data': code
            });
        }

        $$('.editor .wrapper').forEach(function (editorEl) {
            var textareaEl = editorEl.querySelector('textarea');
            var codeMirror = CodeMirror.fromTextArea(textareaEl, {
                'mode': 'python',
                'theme': 'neat',
                'lineNumbers': true,
                'readOnly': false
            });

            var buttonEl = document.createElement('button');
            buttonEl.textContent = 'Run'
            buttonEl.className = 'run';

            var outputEl = document.createElement('pre');
            outputEl.className = 'output';

            buttonEl.addEventListener('click', function () {
                run(codeMirror.getValue()).then(function (output) {
                    outputEl.textContent = output.responseText === undefined ? output : '\n';
                    outputEl.style.display = 'block';
                });
            });

            editorEl.appendChild(buttonEl);
            editorEl.appendChild(outputEl);
        });

        var sectionEls = $$('section');
        var buttonEls = $$('.next');

        var  sectionNo = 0;
        function next() {
            if (sectionNo > 0) {
                buttonEls[sectionNo - 1].style.display = 'none';
            }
            if (sectionNo < buttonEls.length) {
                buttonEls[sectionNo].style.display = 'block';
            }
            sectionEls[sectionNo].style.display = 'block';
            $$('.CodeMirror').forEach(el => el.CodeMirror.refresh());
            sectionNo++;
        }
        next();
        //for (var i = 0; i < 7; i++) next();

        $$('.next').forEach(function (nextEl) {
            nextEl.addEventListener('click', next);
        });

    </script>
</body>
</html>
